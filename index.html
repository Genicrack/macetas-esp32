
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Panel Maceta IoT</title>
<style>
body { font-family: Arial; background: #f4f4f4; padding: 20px; }
.card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #ccc; margin-bottom: 20px; }
button { padding: 10px; margin: 5px; border: none; border-radius: 5px; }
.on { background: green; color: white; }
.off { background: red; color: white; }
</style>
</head>
<body>
<h1>ðŸŒ± Panel Maceta Automatizada</h1>

<div class="card">
  <h3>Luces</h3>
  <button onclick="toggle('luzNormal')" id="btnLuzNormal">Luz Normal</button>
  <button onclick="toggle('luzUV')" id="btnLuzUV">Luz UV</button>
</div>

<div class="card">
  <h3>Bombas</h3>
  <button onclick="toggle('bomba1')" id="btnBomba1">Bomba Agua</button>
  <button onclick="toggle('bomba2')" id="btnBomba2">Bomba Nutrientes</button>
</div>

<div class="card">
  <h3>Sensores</h3>
  <p>Humedad: <span id="humedad">--</span>%</p>
  <p>Temperatura: <span id="temperatura">--</span>Â°C</p>
  <p>Lluvia/Nieve: <span id="lluvia">--</span></p>
</div>

<script>
const ESP32_IP = "http://192.168.0.150"; // Cambia por la IP de tu ESP32

function updateData() {
  fetch(`${ESP32_IP}/getData`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("humedad").textContent = data.humedad;
      document.getElementById("temperatura").textContent = data.temperatura;
      document.getElementById("lluvia").textContent = data.lluvia;
    });
}

function toggle(device) {
  fetch(`${ESP32_IP}/setDevice?device=${device}&state=on`);
}

setInterval(updateData, 2000);
</script>
</body>
</html>
